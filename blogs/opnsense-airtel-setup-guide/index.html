<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        :root {
            --accent-color: #FF4D4D;
        }
    </style>

    
    
    
    
    
    

    
    <title>Guide: OPNsense Airtel Setup</title>
    <meta name="description" content="This guide will walk you through setting up OPNsense with an Airtel connection with a dynamic IP. If you have a static IP, step 6 will vary. I do not have a static IP, so I am not sure of the specifics.
For the sake of simplicity, I will be referring to the Airtel&rsquo;s all in one router as &ldquo;Airtel&rsquo;s router&rdquo;.
Pre-Requisites

OPNsense Installation: This guide will NOT walk through how to install OPNsense. Refer to the official documentation or other guides for installation instructions
PPPoE credentials

You can follow these steps to get your credentials


WAN VLAN ID/ tag. Find this information on the WAN page of Airtel&rsquo;s router

Getting PPPoE credentials
Using the Airtel Thanks app:">
    <meta name="keywords" content='Dev, Mashru, Dev Mashru, Cyber Security, Cybersecurity, Penetration Testing, Pen Testing, blog, GIAC, GPEN, GCIH, GSEC, GIAC Advisory Board, GFACT, opnsense, airtel, network, guide'>

    <meta property="og:url" content="https://mashru.dev/blogs/opnsense-airtel-setup-guide/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Guide: OPNsense Airtel Setup">
    <meta property="og:description" content="This guide will walk you through setting up OPNsense with an Airtel connection with a dynamic IP. If you have a static IP, step 6 will vary. I do not have a static IP, so I am not sure of the specifics.
For the sake of simplicity, I will be referring to the Airtel&rsquo;s all in one router as &ldquo;Airtel&rsquo;s router&rdquo;.
Pre-Requisites

OPNsense Installation: This guide will NOT walk through how to install OPNsense. Refer to the official documentation or other guides for installation instructions
PPPoE credentials

You can follow these steps to get your credentials


WAN VLAN ID/ tag. Find this information on the WAN page of Airtel&rsquo;s router

Getting PPPoE credentials
Using the Airtel Thanks app:">
    <meta property="og:image" content="https://mashru.dev/images/Dev.jpg">
    <meta property="og:image:secure_url" content="https://mashru.dev/images/Dev.jpg">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Guide: OPNsense Airtel Setup">
    <meta name="twitter:description" content="This guide will walk you through setting up OPNsense with an Airtel connection with a dynamic IP. If you have a static IP, step 6 will vary. I do not have a static IP, so I am not sure of the specifics.
For the sake of simplicity, I will be referring to the Airtel&rsquo;s all in one router as &ldquo;Airtel&rsquo;s router&rdquo;.
Pre-Requisites

OPNsense Installation: This guide will NOT walk through how to install OPNsense. Refer to the official documentation or other guides for installation instructions
PPPoE credentials

You can follow these steps to get your credentials


WAN VLAN ID/ tag. Find this information on the WAN page of Airtel&rsquo;s router

Getting PPPoE credentials
Using the Airtel Thanks app:">
    <meta property="twitter:domain" content="https://mashru.dev/blogs/opnsense-airtel-setup-guide/">
    <meta property="twitter:url" content="https://mashru.dev/blogs/opnsense-airtel-setup-guide/">
    <meta name="twitter:image" content="https://mashru.dev/images/Dev.jpg">

    
    <link rel="canonical" href="https://mashru.dev/blogs/opnsense-airtel-setup-guide/">

    
    <link rel="stylesheet" type="text/css" href="/css/normalize.min.css" media="print">

    
    <link rel="stylesheet" type="text/css" href="/css/main.min.css">

    
    <link id="dark-theme" rel="stylesheet" href="/css/dark.min.css">

    
    <script src="/js/bundle.min.3eb19cb61dde9e37b9522867f3e024aeb68e26ab8e03252e46e365abcb19acf7.js" integrity="sha256-PrGcth3enje5Uihn8&#43;AkrraOJquOAyUuRuNlq8sZrPc="></script>

    
    

    <script defer src="https://umami.mashru.dev/script.js" data-website-id="0f984a7b-4491-45bd-88de-c48208c2ef26"></script>
</head>
<body>
        <script>
            
            setThemeByUserPref();
        </script><header class="header">
    <nav class="header-nav">

        
        <div class="avatar">
            <a href="https://mashru.dev/">
                <img src='/images/Dev.jpg' alt="avatar">
            </a>
        </div>
        

        <div class="nav-title">
            <a class="nav-brand" href="https://mashru.dev/">Dev Mashru</a>
        </div>

        <div class="nav-links">
            
            <div class="nav-link">
                <a href="https://mashru.dev/about/" aria-label="about" ><span data-feather='info'></span> About </a>
            </div>
            
            <div class="nav-link">
                <a href="https://mashru.dev/blogs/" aria-label="blogs" ><span data-feather='book'></span> Blogs </a>
            </div>
            
            <div class="nav-link">
                <a href="https://mashru.dev/projects/" aria-label="projects" ><span data-feather='code'></span> Projects </a>
            </div>
            
            <div class="nav-link">
                <a href="https://mashru.dev/tags/" aria-label="tags" ><span data-feather='tag'></span> Tags </a>
            </div>
            
            <div class="nav-link">
                <a href="https://mashru.dev/index.xml" aria-label="rss" ><span data-feather='rss'></span>  </a>
            </div>
            

            <span class="nav-icons-divider"></span>
            <div class="nav-link dark-theme-toggle">
                <span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
                <a aria-hidden="true" role="switch">
                    <span class="theme-toggle-icon" data-feather="moon"></span>
                </a>
            </div>

            <div class="nav-link" id="hamburger-menu-toggle">
                <span class="sr-only hamburger-menu-toggle-screen-reader-target">menu</span>
                <a aria-checked="false" aria-labelledby="hamburger-menu-toggle" id="hamburger-menu-toggle-target" role="switch">
                    <span data-feather="menu"></span>
                </a>
            </div>

            
            <ul class="nav-hamburger-list visibility-hidden">
                
                <li class="nav-item">
                    <a href="https://mashru.dev/about/" ><span data-feather='info'></span> About </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://mashru.dev/blogs/" ><span data-feather='book'></span> Blogs </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://mashru.dev/projects/" ><span data-feather='code'></span> Projects </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://mashru.dev/tags/" ><span data-feather='tag'></span> Tags </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://mashru.dev/index.xml" ><span data-feather='rss'></span>  </a>
                </li>
                
                <li class="nav-item dark-theme-toggle">
                    <span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
                    <a role="switch">
                        <span class="theme-toggle-icon" data-feather="moon"></span>
                    </a>
                </li>
            </ul>

        </div>
    </nav>
</header>
<main id="content">
    <div class="post container">
    <div class="post-header-section">
        <h1>Guide: OPNsense Airtel Setup</h1>

        

        
	
	
	
	
        

	

	

	
          <small role="doc-subtitle"></small>
	

	
          <p class="post-date">January 11, 2025
           
          </p>
	

        <ul class="post-tags">
          
           
             <li class="post-tag"><a href="https://mashru.dev/tags/opnsense">opnsense</a></li>
           
         
           
             <li class="post-tag"><a href="https://mashru.dev/tags/airtel">airtel</a></li>
           
         
           
             <li class="post-tag"><a href="https://mashru.dev/tags/network">network</a></li>
           
         
           
             <li class="post-tag"><a href="https://mashru.dev/tags/guide">guide</a></li>
           
         
        </ul>
    </div>

    <div class="post-content">
        <p>This guide will walk you through setting up OPNsense with an Airtel connection with a dynamic IP. If you have a static IP, <a href="#opnsense-configuration">step 6</a> will vary. I do not have a static IP, so I am not sure of the specifics.</p>
<p>For the sake of simplicity, I will be referring to the Airtel&rsquo;s all in one router as &ldquo;Airtel&rsquo;s router&rdquo;.</p>
<h2 id="pre-requisites">Pre-Requisites</h2>
<ul>
<li><strong>OPNsense Installation:</strong> This guide will NOT walk through how to install OPNsense. Refer to the official documentation or other guides for installation instructions</li>
<li><strong>PPPoE credentials</strong>
<ul>
<li>You can follow <a href="#how-to-get-pppoe-credentials">these</a> steps to get your credentials</li>
</ul>
</li>
<li><strong>WAN VLAN ID/ tag</strong>. Find this information on the WAN page of Airtel&rsquo;s router</li>
</ul>
<h2 id="getting-pppoe-credentials">Getting PPPoE credentials</h2>
<p>Using the Airtel Thanks app:</p>
<ol>
<li>Go to the &ldquo;services&rdquo; page</li>
<li>Tap on your broadband connection or if you have a Airtel Black connection then
<ul>
<li>Go to the &ldquo;Airtel Black&rdquo; page</li>
<li>Navigate to &ldquo;Manage connection&rdquo;</li>
<li>Tap on &ldquo;Broadband/ Wi-Fi&rdquo;</li>
</ul>
</li>
<li>Scroll down till you see Account info. Note down your DSL Number and Account Number</li>
</ol>
<p>Your PPPoE username is <code>&lt;DSL_number&gt;@airtelbroadband.in</code>, and your PPPoE password is your account number.</p>
<p>Alternatively, you can obtain your username from the WAN section in your Airtel-provided router.</p>
<h2 id="airtel-router-and-other-basic-configuration">Airtel router and other basic configuration</h2>
<ol>
<li>Login to the Airtel router and configure one port in bridge mode</li>
<li>Connect that port to the WAN port of OPNsense</li>
<li>Connect the LAN port of OPNsense to a switch</li>
<li>Access OPNsense using its IP address</li>
</ol>
<p>If you are wondering how all the connections would look like, you can take a look at the <a href="/blogs/my-2024-homelab-roundup#network">network layout diagram</a> I posted in my homelab roundup blog. (ONT is basically Airtel&rsquo;s router)</p>
<h2 id="opnsense-configuration">OPNsense configuration</h2>
<ol>
<li>Log into OPNsense using your username and password set during installation</li>
<li>Go to <strong>Interfaces &gt; Other types &gt; VLAN</strong></li>
<li>Click on the plus (+) icon on the right side
<ul>
<li>Enter a device name (optional). OPNsense will generate a name if left blank</li>
<li>Set the &ldquo;Parent&rdquo; to your WAN interface</li>
<li>Enter the VLAN ID you noted earlier from the Airtel router in the &ldquo;VLAN tag&rdquo; field</li>
<li>Set VLAN priority to &ldquo;Best Effort&rdquo; (default).</li>
<li>Add a description (optional)</li>
<li>Click on &ldquo;Save&rdquo;</li>
<li>Click on &ldquo;Apply&rdquo; to apply the changes</li>
</ul>
</li>
</ol>
<p><img src="/images/vlan.png" alt="vlan.png"></p>
<ol start="4">
<li>Navigate to the <strong>Assignment tab</strong> under <strong>Interfaces</strong></li>
<li>Select the newly created VLAN interface in the <strong>WAN interface</strong> dropdown and click on &ldquo;Save&rdquo;</li>
<li>Go to <strong>WAN interface</strong> (<strong>Interfaces &gt; [WAN]</strong>)
<ul>
<li>In the <strong>Generic configuration section</strong>
<ul>
<li>Select PPPoE in the <strong>IPv4 Configuration Type</strong> dropdown</li>
<li>Select DHCPv6 in the <strong>IPv6 Configuration Type</strong> dropdown (if you want IPv6)</li>
<li>Enable <strong>Dynamic Gateway Policy</strong></li>
</ul>
</li>
<li>Scroll down to the PPPoE configuration section and enter the details as follows:
<ul>
<li><code>PPPoE username</code>: Your &lt;DSL_number&gt;@airtelbroadband.in</li>
<li><code>PPPoE password</code>: Account number</li>
<li><code>PPPoE service name</code>: <code>Airtel</code></li>
<li>Enable <strong>Dial on demand</strong></li>
<li><code>PPPoE idle timeout</code>: <code>3600</code></li>
</ul>
</li>
<li>See <a href="#ipv6-configuration">IPv6 configuration section</a>, if you want to setup IPv6</li>
<li>Click on &ldquo;Save&rdquo; and &ldquo;Apply changes&rdquo; (a banner will pop up on the top)</li>
</ul>
</li>
</ol>
<p><img src="/images/wan-1.png" alt="wan-1.png"></p>
<p><img src="/images/wan-2.png" alt="wan-2.png"></p>
<ol start="7">
<li>You should now have internet access</li>
</ol>
<h3 id="enabling-dhcp">Enabling DHCP</h3>
<p>To enable DHCP, go to <strong>Services &gt; DHCPv4 &gt; [LAN]</strong>:</p>
<ul>
<li>Check the <strong>Enable</strong> checkbox</li>
<li>Click on &ldquo;Save&rdquo;</li>
</ul>
<h3 id="ipv6-configuration">IPv6 configuration</h3>
<p>To obtain an IPv6 address:</p>
<ol>
<li>Go to <strong>[WAN] interface</strong> and scroll down to <strong>DHCPv6 client configuration</strong>
<ul>
<li>Enable <strong>Use IPv4 connectivity</strong></li>
<li>Set <strong>Prefix delegation size</strong> to <code>64</code></li>
<li>Enable <strong>Request prefix only</strong></li>
<li>Click on &ldquo;Save&rdquo;</li>
</ul>
</li>
<li>Go to the <strong>[LAN] interface</strong>
<ul>
<li>In the Generic configuration section
<ul>
<li>Select Track interface in the <strong>IPv6 Configuration Type</strong> dropdown</li>
</ul>
</li>
<li>Scroll down to the <strong>Track IPv6 Interface</strong> section
<ul>
<li>Select <strong>WAN</strong> from the <strong>IPv6 Interface</strong> dropdown</li>
</ul>
</li>
<li>Click on &ldquo;Save&rdquo;</li>
</ul>
</li>
</ol>
<p><img src="/images/lan.png" alt="lan.png"></p>
<p>This is how you can use OPNsense with an Airtel connection with a dynamic IP.</p>

        
    </div>

    <div class="prev-next">
        
    </div>

    
    
        <svg id="btt-button" class="arrow-logo" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 384 512" onclick="scrollToTop()" title="Go to top">
    
    <path d="M177 159.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 329.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"/>
</svg>
<script>
    let backToTopButton = document.getElementById("btt-button");

    window.onscroll = function() {
        scrollFunction()
    };

    function scrollFunction() {
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            backToTopButton.style.display = "block";
        } else {
            backToTopButton.style.display = "none";
        }
    }

    function scrollToTop() {
        window.scrollTo(0, 0);
    }
</script>

    
    
</div>

<aside class="post-toc">
    <nav id="toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#pre-requisites">Pre-Requisites</a></li>
    <li><a href="#getting-pppoe-credentials">Getting PPPoE credentials</a></li>
    <li><a href="#airtel-router-and-other-basic-configuration">Airtel router and other basic configuration</a></li>
    <li><a href="#opnsense-configuration">OPNsense configuration</a>
      <ul>
        <li><a href="#enabling-dhcp">Enabling DHCP</a></li>
        <li><a href="#ipv6-configuration">IPv6 configuration</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </nav>
</aside>



    

        </main><footer class="footer">
    
    

    

    

        
            
        

        

        
        

        

    

    
        <span>&copy; 2025 Dev Mashru</span>
    

    <span>
        Made with &#10084;&#65039; using <a target="_blank" href="https://github.com/gokarna-theme/gokarna-hugo">Gokarna</a>
    </span>
</footer>
</body>
</html>
